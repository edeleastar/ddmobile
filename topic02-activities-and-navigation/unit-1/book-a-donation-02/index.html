<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"
          type="text/css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"
          rel="stylesheet"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../../index.html"> Activities & Navigation  </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Lab-03">
          Lab-03
        </a>
      
        <a class="item" data-tab="01">
          01
        </a>
      
        <a class="item" data-tab="02">
          02
        </a>
      
        <a class="item" data-tab="03">
          03
        </a>
      
        <a class="item" data-tab="04">
          04
        </a>
      
        <a class="item" data-tab="Solution">
          Solution
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-1-2018//topic01-overview-and-tools/unit-1/book-a-lab-01/index.html">Lab-01 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-1-2018//topic01-overview-and-tools/unit-1/book-b-lab-02/index.html">Lab-02 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-1-2018//topic02-activities-and-navigation/unit-1/book-a-donation-02/index.html">Lab-03 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-1-2018//topic03-app-structure/unit-1/book-a-donation-03/index.html">Lab-04 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-1-2018//topic04-persistence/unit-1/book-a-donation-03.1/index.html">Lab-05 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-1-2018//topic04-persistence/unit-2/book-a-donation-04/index.html">Lab-06 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-mad-1-2018//topic04-persistence/unit-2/book-b-donation-realm/index.html">Lab-07 </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Lab-03">
            <h1>Objectives</h1>
<p>In this Lab, you will be required to build the second version of our Donation Case Study App, called <b>Donation.2.0</b>. Here, we introduce some simple menu handling and evolve the Donation Android app to include a Report view. We also make use of a simple ArrayAdapter to display donation data in our Report.</p>
<p><b>NOTE : These Labs we build in a previous Version to Android Studio 3.0 so be aware that some images and instructions may not be up to date. Also, when replacing any XML with that from the Lab, the Widgets will not be &#39;anchored&#39; so it would be advisable to go ahead and &#39;anchor&#39; your widgets to improve the future design of your layouts.</b></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="01">
            <h1>Package Name</h1>
<p>This is the version from the previous Lab of the <b>Donation</b> app:</p>
<ul>
<li><a href="archives/Donation.1.5.zip">Donation.1.5.zip</a></li>
</ul>
<p>and this is the current version of the <b>Donation</b> app (<strong>Your Starter Code for this lab</strong>)</p>
<ul>
<li><a href="archives/Donation.2.0.Starter.zip">Donation.2.0.zip</a></li>
</ul>
<p>I&#39;d recommend downloading the &#39;Starter Code&#39;, but if you wish to continue using your version (1.5) you would need to &#39;refactor&#39; it to <b>Donation.2.0</b>. So, all you need to do is:</p>
<ol>
<li>Close the current project</li>
<li>Copy and rename the Donation.1.5 folder to Donation.2.0</li>
<li>Open the Project Donation.2.0 in Android Studio</li>
</ol>
<p>And don&#39;t forget to update your <strong>app_name</strong> resource in your <strong>strings.xml</strong>.</p>
<p>We should also take this opportunity to change the name of the &#39;ie.app&#39; package to &#39;ie.app.activities&#39;, as we will be introducing other packages later on.</p>
<p>So create a new package called <strong>ie.app.activities</strong> (in the <strong>main</strong> folder)</p>
<p><img src="img/lab3s101.png" alt=""></p>
<p>and drag in your <b>Donate.java</b> into this new package. You can delete the empty package (if Android Studio hasn&#39;t done it already)</p>
<p>Do the same for the <b>ApplicationTest</b> class.</p>
<p>Next, check that the import statement in <strong>Donate.java</strong> is as follows:</p>
<pre><code>import android.widget.Toast;

import ie.app.R;

public class Donate extends AppCompatActivity {
  ...</code></pre>
<p><img src="img/lab3s102.png" alt=""></p>
<p>So make sure your project structure looks like the above before continuing.</p>
<p>Also, don&#39;t forget to change the <b>app_name</b> string resource in your strings.xml.</p>
<p>Whether you&#39;ve downloaded the Starter App or continued on with your own app, you should still &quot;Clean&quot; your project at this stage &quot;Build-&gt;Clean Project&quot;, and then Rebuild &amp; finally run your app, to make sure everything is ok.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="02">
            <h1>Working with Menus</h1>
<p>Open <b>res/values/strings.xml</b> and introduce a new String resource like this:</p>
<pre><code class="lang-xml">&lt;string name=&quot;menuReport&quot;&gt;Report&lt;/string&gt;</code></pre>
<p>We have a menu resource called <strong>menu_donate.xml</strong> in the <strong>res/menu</strong> folder. Modify this file by adding this new menu item:</p>
<pre><code class="lang-xml">  &lt;item
       android:id=&quot;@+id/menuReport&quot;
        android:orderInCategory=&quot;100&quot;
        android:title=&quot;@string/menuReport&quot;
        app:showAsAction=&quot;never&quot;/&gt;</code></pre>
<p>(Make sure it is within the &#39;<strong>menu</strong>&#39; element)</p>
<p>In <strong>Donate.java</strong>, change the <strong><em>onOptionsItemSelected()</em></strong> method to look like this:</p>
<pre><code class="lang-java">  @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId())
        {
            case R.id.menuReport:
                Toast.makeText(this, &quot;Report Selected&quot;, Toast.LENGTH_SHORT).show();
                break;
        }
        return super.onOptionsItemSelected(item);
    }</code></pre>
<p>Run the app and when you press the menu button (or the overflow menu) and select &#39;Report&#39;, you should see the toast message appear.</p>
<p><img src="img/lab3s103.png" alt=""><img src="img/lab3s104.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="03">
            <h1>Reports Activity</h1>
<p>Before we start to design a new activity, Add a string resource in <strong>res/values/strings.xml</strong>:</p>
<pre><code class="lang-xml">&lt;string name=&quot;reportTitle&quot;&gt;Report&lt;/string&gt;</code></pre>
<p>Design a new layout called <strong>activity_report</strong>. Do this by locating the <strong>res/layout</strong> folder and selecting &quot;New-&gt;Layout resource file&quot;, like so:</p>
<p><img src="img/lab3s301.png" alt=""></p>
<p>You can choose all the defaults for this layout.</p>
<p><img src="img/lab3s302.png" alt=""></p>
<p>&quot;Morph&quot; our layout from Linear to Relative, like so,</p>
<p><img src="img/lab3s303.png" alt=""></p>
<p>and build a layout similar to the following:</p>
<p><img src="img/lab3s304.png" alt=""></p>
<p>This is the layout file itself, if you just want to overwrite the xml:</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;android.support.constraint.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:id=&quot;@+id/relativeLayout2&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;
    tools:layout_editor_absoluteY=&quot;81dp&quot;&gt;

    &lt;TextView
        android:id=&quot;@+id/reportTitle&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginBottom=&quot;8dp&quot;
        android:layout_marginEnd=&quot;8dp&quot;
        android:layout_marginStart=&quot;8dp&quot;
        android:layout_marginTop=&quot;8dp&quot;
        android:text=&quot;@string/reportTitle&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot;
        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;
        app:layout_constraintEnd_toEndOf=&quot;parent&quot;
        app:layout_constraintHorizontal_bias=&quot;0.026&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot;
        app:layout_constraintVertical_bias=&quot;0.017&quot; /&gt;

    &lt;ListView
        android:id=&quot;@+id/reportList&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginTop=&quot;58dp&quot;
        app:layout_constraintStart_toStartOf=&quot;parent&quot;
        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;
&lt;/android.support.constraint.ConstraintLayout&gt;</code></pre>
<p>Introduce a new &quot;Empty Activity&quot; into <strong>ie.app.activities</strong> to render this activity - but be careful <strong>NOT</strong> to &#39;<strong><em>Generate Layout File</em></strong>&#39; (as we have one already):</p>
<p><img src="img/lab3s305.png" alt=""></p>
<p>and replace it with the following:</p>
<pre><code class="lang-java">package ie.app.activities;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.app.Activity;
import android.widget.ArrayAdapter;
import android.widget.ListView;

import ie.app.R;

public class Report extends AppCompatActivity
{
  ListView listView;

  static final String[] numbers = new String[] {
      &quot;Amount, Pay method&quot;,
      &quot;10,     Direct&quot;,
      &quot;100,    PayPal&quot;,
      &quot;1000,   Direct&quot;,
      &quot;10,     PayPal&quot;,
      &quot;5000,   PayPal&quot;};

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_report);

    listView = (ListView) findViewById(R.id.reportList);
    ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;String&gt;(this,  android.R.layout.simple_list_item_1, numbers);
    listView.setAdapter(adapter);
  }
}</code></pre>
<p>This will display a hard-coded lists of donations on the &quot;Report Screen&quot;.</p>
<p>Change the <strong>Donate</strong> activity to load this view when &quot;Report&quot; is selected from the menu:</p>
<pre><code class="lang-java">  @Override
  public boolean onOptionsItemSelected(MenuItem item)
  {
    switch (item.getItemId())
    {
      case R.id.menuReport : startActivity (new Intent(this, Report.class));
                             break;
    }
   return super.onOptionsItemSelected(item);
  }</code></pre>
<p>Confirm that the activity specification has been added to the <strong>AndroidManifest.xml</strong> file:</p>
<pre><code class="lang-xml">      &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;ie.app&quot; &gt;

    &lt;application
        android:allowBackup=&quot;true&quot;
        android:icon=&quot;@mipmap/ic_launcher&quot;
        android:label=&quot;@string/app_name&quot;
        android:supportsRtl=&quot;true&quot;
        android:theme=&quot;@style/AppTheme&quot; &gt;
        &lt;activity
            android:name=&quot;.activities.Donate&quot;
            android:label=&quot;@string/app_name&quot;
            android:theme=&quot;@style/AppTheme.NoActionBar&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;

                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
        &lt;activity android:name=&quot;.activities.Report&quot; &gt;
        &lt;/activity&gt;
    &lt;/application&gt;

&lt;/manifest&gt;</code></pre>
<p>Try it all now - it should load up, like below</p>
<p><img src="img/lab3s306.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="04">
            <h1>Our Menu Revisited</h1>
<p>When you navigate from the <strong>Donate</strong> activity to <strong>Report</strong>, there will be no menu available. So we need to first <em>inflate</em> the menu by introducing the following method into the <strong>Report</strong> activity, like so</p>
<pre><code class="lang-java">@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.menu_donate, menu);
        return true;
    }</code></pre>
<p>Bring in a new menu item, &#39;<strong><em>Donate</em></strong>&#39; - Donate should bring you back to the main <strong>Donate</strong> Screen.</p>
<p>This is a very similar approach to what you did in <strong>Step 02</strong>, so revisit this step and see if you can end up with something like the following for the <strong>Report</strong> Screen:</p>
<p><img src="img/lab3s401.png" alt=""></p>
<p>So when you select &quot;Donate&quot; you should be navigated back to the <strong>Donate</strong> activity (and vice-versa).   </p>
<p>We&#39;ll look at populating the list with actual donations in the next lab.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Solution">
            <h1>Solution</h1>
<p>Solution so far:</p>
<ul>
<li><a href="archives/Donation.2.0.zip">Donation.2.0.zip</a></li>
</ul>

          </div>
        
      </div>
    </div>
  </div>


  <br>
  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> 
      </div>
    </div>
  </div>

  </body>

</html>